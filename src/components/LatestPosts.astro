---
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');
const latestPosts = posts
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 3);

function formatDate(date: Date): string {
  return date.toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'short',
    day: 'numeric',
  });
}
---

<section class="relative py-12 sm:py-16">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <h2 class="text-3xl font-bold text-slate-900 text-center mb-12">
      Latest from the Blog
    </h2>
    <div class="space-y-4 max-w-4xl mx-auto">
      {latestPosts.map((post) => (
        <a
          href={`/blog/${post.id}`}
          class="flex justify-between items-center p-4 bg-white border-l-4 border-l-transparent border border-slate-200 rounded-lg hover:border-l-emerald-500 hover:bg-emerald-50/50 hover:shadow-sm transition-all"
        >
          <span class="font-medium text-slate-900">{post.data.title}</span>
          <span class="text-sm text-emerald-600 font-medium">{formatDate(post.data.date)}</span>
        </a>
      ))}
    </div>
    <div class="text-center mt-8">
      <a href="/blog" class="inline-flex items-center text-emerald-600 hover:text-emerald-700 font-medium transition-colors">
        View all posts <span class="ml-1">&rarr;</span>
      </a>
    </div>
  </div>
</section>
